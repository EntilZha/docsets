<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Configure runs &mdash; Aim 3.13.4 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/logo.svg"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Query runs and objects" href="query_runs.html" />
    <link rel="prev" title="Manage runs" href="manage_runs.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Aim
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Quick Start</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../quick_start/setup.html">Get started with Aim</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quick_start/integrations.html">Integrate Aim into an existing project</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quick_start/convert_data.html">Migrate from other tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quick_start/supported_types.html">Track media and objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quick_start/next_steps.html">Next steps</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Aim UI</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ui/overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ui/pages/home_page.html">Home Page</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ui/pages/run_management.html">Runs Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ui/pages/explorers.html">Explorers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ui/pages/table.html">Table</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ui/pages/bookmarks.html">Bookmarks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ui/pages/tags.html">Tags page</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Using Aim</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="manage_runs.html">Manage runs</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Configure runs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id1">Reusing Run in your Repo</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id2">Defining custom location for your Repo</a></li>
<li class="toctree-l2"><a class="reference internal" href="#organizing-runs-in-experiments">Organizing Runs in Experiments</a></li>
<li class="toctree-l2"><a class="reference internal" href="#adding-tags-and-params-to-run">Adding tags and params to Run</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id3">Training Run Reproducibility</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#what-data-is-logged-automatically">What data is logged automatically?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-enable-system-params-automatic-logging">How to enable system params automatic logging?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#capturing-terminal-logs">Capturing Terminal logs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="query_runs.html">Query runs and objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="search.html">Query language basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="remote_tracking.html">Track experiments with aim remote server</a></li>
<li class="toctree-l1"><a class="reference internal" href="run_status_notifications.html">Monitoring and Notifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="k8s_deployment.html">Host Aim on Kubernetes (K8S)</a></li>
<li class="toctree-l1"><a class="reference internal" href="jupyter_notebook_ui.html">Run Aim UI on Jupyter Notebook</a></li>
<li class="toctree-l1"><a class="reference internal" href="sagemaker_notebook_ui.html">Run Aim UI on SageMaker Notebook instance</a></li>
<li class="toctree-l1"><a class="reference internal" href="integration_guides.html">Integration guides</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Understanding Aim</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../understanding/overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../understanding/data_storage.html">Data storage - where Aim data is collected</a></li>
<li class="toctree-l1"><a class="reference internal" href="../understanding/storage_indexing.html">Storage indexing - how Aim data is indexed</a></li>
<li class="toctree-l1"><a class="reference internal" href="../understanding/concepts.html">Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../understanding/running_aim_with_profiling.html">Running Aim with profiling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../understanding/metric_step_hashing.html">Storing Metric sequence data for fast access</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../examples/images_explorer_gan.html">Track and compare GANs with Aim</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">References</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../refs/cli.html">Aim CLI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../refs/cli.html#aim-status-watcher-cli">Aim status watcher CLI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../refs/sdk.html">Aim SDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../refs/storage.html">Aim Storage</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Community</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../community/telemetry.html">Anonymized Telemetry</a></li>
<li class="toctree-l1"><a class="reference internal" href="../generated/CHANGELOG.html">Changelog</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Aim</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Configure runs</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/using/configure_runs.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="configure-runs">
<h1>Configure runs<a class="headerlink" href="#configure-runs" title="Permalink to this heading"></a></h1>
<p>You can configure Aim run instance to change the default repository location, retrieve a particular run instance, or
store custom parameters for your run. You can configure your Run upon instantiation.</p>
<p>Here you can see all available options you can use to configure your Run instance.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">run_hash</span></code>: Run’s hash. Can be used to restore/retrieve a particular run form the repo. This is handy if you want to
update something or add new metrics in your already existing run. If skipped, the hash will be generated
automatically. Example covered in <a class="reference external" href="#reusing-run-in-your-repo">Reusing Run in your Repo</a> section.
Starting from Aim version <code class="docutils literal notranslate"><span class="pre">3.13</span></code>, run_hash values restricted to the auto-generated values only. This
is done to prevent multiple undesired cases, such as, creating a new <code class="docutils literal notranslate"><span class="pre">Run</span></code> instead of re-opening
the existing one due to the typo, putting special symbols in <code class="docutils literal notranslate"><span class="pre">Run.hash</span></code>, etc. If the wrong <code class="docutils literal notranslate"><span class="pre">run_hash</span></code> is
specified, <code class="docutils literal notranslate"><span class="pre">MissingRunError</span></code> will be raised.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">repo</span></code>: Aim repository path or Repo object to which Run object is bound. If skipped, default Repo is used. More
covered in <a class="reference external" href="#defining-custom-location-for-your-repo">Defining custom location for your Repo</a> section.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">read_only</span></code>: Run creation mode. Default is False, meaning Run object can be used to track metrics.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">experiment</span></code>: Sets Run’s <code class="docutils literal notranslate"><span class="pre">experiment</span></code> property. ‘default’ if not specified. Can be used later to query runs/sequences.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">system_tracking_interval</span></code>: Sets the tracking interval in seconds for system usage metrics (CPU, Memory, etc.). Set
to <code class="docutils literal notranslate"><span class="pre">None</span></code> to disable system metrics tracking.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">log_system_params</span></code>: Enable/Disable logging of system params such as installed packages, git info, environment
variables, etc. Checkout <a class="reference external" href="#training-run-reproducibility">Training Run Reproducibility</a> section for more info.</p></li>
</ul>
<section id="id1">
<h2>Reusing Run in your Repo<a class="headerlink" href="#id1" title="Permalink to this heading"></a></h2>
<p>Sometimes you might want to add/update parameters and tracked values in your existing Run instance. This can be achieved
trough using <code class="docutils literal notranslate"><span class="pre">run_hash</span></code> parameter. Aim generates a unique id (uuid) for your Run instance only if <code class="docutils literal notranslate"><span class="pre">run_hash</span></code> parameter
is not supplied. Example of re-using generated run.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">aim</span> <span class="kn">import</span> <span class="n">Run</span>

<span class="c1"># You can also use ID shown in Aim Web after</span>
<span class="c1"># creating a run without supplying run_hash parameter</span>
<span class="n">uid</span> <span class="o">=</span> <span class="s1">&#39;508c5b29-02c7-4875-a157-f099ea193bfa&#39;</span>
<span class="n">run</span> <span class="o">=</span> <span class="n">Run</span><span class="p">(</span><span class="n">run_hash</span><span class="o">=</span><span class="n">uid</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
    <span class="n">run</span><span class="o">.</span><span class="n">track</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="n">i</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;test&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>In the example above, no matter how often this piece of code will be executed, only a single run entry will be created
or updated.</p>
</section>
<section id="id2">
<h2>Defining custom location for your Repo<a class="headerlink" href="#id2" title="Permalink to this heading"></a></h2>
<p>When you use aim, the library automatically creates <code class="docutils literal notranslate"><span class="pre">.aim</span></code> directory which we call “Repo” in your current directory. Aim
stores data about your runs inside the Repo. Sometimes creating a Repo in your current directory is not convenient due
to various reasons (like lack of permissions), and in such scenarios you can define your own path where a new <code class="docutils literal notranslate"><span class="pre">.aim</span></code>
directory will be created or just reused.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">aim</span> <span class="kn">import</span> <span class="n">Run</span>

<span class="n">run</span> <span class="o">=</span> <span class="n">Run</span><span class="p">(</span><span class="n">repo</span><span class="o">=</span><span class="s1">&#39;~/repo&#39;</span><span class="p">)</span>
<span class="o">...</span>
</pre></div>
</div>
<p>The code above will create a new dir entry <code class="docutils literal notranslate"><span class="pre">~/repo/.aim</span></code></p>
</section>
<section id="organizing-runs-in-experiments">
<h2>Organizing Runs in Experiments<a class="headerlink" href="#organizing-runs-in-experiments" title="Permalink to this heading"></a></h2>
<p>Aim allows you to group runs under experiments, which can be useful for comparing runs intended to tackle a particular
task.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">aim</span> <span class="kn">import</span> <span class="n">Run</span>

<span class="n">run</span> <span class="o">=</span> <span class="n">Run</span><span class="p">(</span><span class="n">experiment</span><span class="o">=</span><span class="s2">&quot;fraud-detection&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="adding-tags-and-params-to-run">
<h2>Adding tags and params to Run<a class="headerlink" href="#adding-tags-and-params-to-run" title="Permalink to this heading"></a></h2>
<p>Aim lets you add tags and parameters on your Run object. Example of this would be if you want to tag your run with a
specific version or keyword. Or you might need to log parameters, so you have some insight on what params have been used
to process that particular Run.</p>
<p>Example of adding and removing tags</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">aim</span> <span class="kn">import</span> <span class="n">Run</span>

<span class="n">run</span> <span class="o">=</span> <span class="n">Run</span><span class="p">()</span>
<span class="n">run</span><span class="o">.</span><span class="n">add_tag</span><span class="p">(</span><span class="s1">&#39;v1.0&#39;</span><span class="p">)</span>
<span class="n">run</span><span class="o">.</span><span class="n">add_tag</span><span class="p">(</span><span class="s1">&#39;some-awesome-tag&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Or you can modify tags on your existing run, but first you have to restore Run object by using it’s hash value</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">aim</span> <span class="kn">import</span> <span class="n">Run</span>

<span class="n">uid</span> <span class="o">=</span> <span class="s1">&#39;508c5b29-02c7-4875-a157-f099ea193bfa&#39;</span>
<span class="n">run</span> <span class="o">=</span> <span class="n">Run</span><span class="p">(</span><span class="n">run_hash</span><span class="o">=</span><span class="n">uid</span><span class="p">)</span>
<span class="n">run</span><span class="o">.</span><span class="n">remove_tag</span><span class="p">(</span><span class="s1">&#39;some-awesome-tag&#39;</span><span class="p">)</span>
<span class="n">run</span><span class="o">.</span><span class="n">add_tag</span><span class="p">(</span><span class="s1">&#39;another-awesome-tag&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Almost same approach goes for parameters</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">aim</span> <span class="kn">import</span> <span class="n">Run</span>

<span class="n">run</span> <span class="o">=</span> <span class="n">Run</span><span class="p">()</span>
<span class="n">var</span> <span class="o">=</span> <span class="s1">&#39;some value&#39;</span>

<span class="n">run</span><span class="p">[</span><span class="s1">&#39;var&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">var</span>
</pre></div>
</div>
<p>Also, you can restore the Run object using its hash key and overwrite value of the previously stored parameter.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">aim</span> <span class="kn">import</span> <span class="n">Run</span>

<span class="n">uid</span> <span class="o">=</span> <span class="s1">&#39;508c5b29-02c7-4875-a157-f099ea193bfa&#39;</span>
<span class="n">run</span> <span class="o">=</span> <span class="n">Run</span><span class="p">(</span><span class="n">run_hash</span><span class="o">=</span><span class="n">uid</span><span class="p">)</span>
<span class="n">var</span> <span class="o">=</span> <span class="s1">&#39;another value&#39;</span>

<span class="n">run</span><span class="p">[</span><span class="s1">&#39;var&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">var</span>
</pre></div>
</div>
</section>
<section id="id3">
<h2>Training Run Reproducibility<a class="headerlink" href="#id3" title="Permalink to this heading"></a></h2>
<p>When running multiple training jobs it is crucial to understand the factors affecting the trained models performance.
While the hyperparameters diff is an obvious place to look at, the training script environment itself can change the
collected metadata in unexpected ways. It is important to be able to reproduce your runs’ environment to presumably get
the same results. Sometimes even minor version change in your script dependencies or a small tweak in the training code
itself can affect training results. Thus, it’s important to collect and log information such as package versions,
environment variables, input arguments, etc. with each run.</p>
<p>Doing this manually requires a lot of code to be added to your training script. This is where Aim’s logging of system
parameters can come in handy!</p>
<section id="what-data-is-logged-automatically">
<h3>What data is logged automatically?<a class="headerlink" href="#what-data-is-logged-automatically" title="Permalink to this heading"></a></h3>
<p>Aim lets you enable system params logging for your Run which in result will log the following parameters</p>
<ul class="simple">
<li><p>Environment Variables</p></li>
<li><p>Executables</p></li>
<li><p>CLI arguments</p></li>
<li><p>Installed packages and their versions</p></li>
<li><p>Git information such as current branch, commit hash, author, etc. (if applicable)</p></li>
</ul>
</section>
<section id="how-to-enable-system-params-automatic-logging">
<h3>How to enable system params automatic logging?<a class="headerlink" href="#how-to-enable-system-params-automatic-logging" title="Permalink to this heading"></a></h3>
<p>To enable logging of the parameters listed above, your Run instance must be supplied with
<code class="docutils literal notranslate"><span class="pre">log_system_params=True</span></code> option, by default it is disabled!</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">run</span> <span class="o">=</span> <span class="n">Run</span><span class="p">(</span><span class="n">log_system_params</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>In addition, these logged parameters can be used in the search box to filter runs based on the supplied parameters.
Everything is searchable at Aim!</p>
<p>Here is an example of what you can do with it:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">run</span><span class="o">.</span><span class="n">__system_params</span><span class="o">.</span><span class="n">git_info</span><span class="o">.</span><span class="n">branch</span> <span class="o">==</span> <span class="s1">&#39;feature/testing&#39;</span>
</pre></div>
</div>
</section>
</section>
<section id="capturing-terminal-logs">
<h2>Capturing Terminal logs<a class="headerlink" href="#capturing-terminal-logs" title="Permalink to this heading"></a></h2>
<p>When it comes to automating training of multiple runs with job schedulers or workload managers on a cluster,
it becomes hard to track the terminal logs of the runs. This includes the stdout, stderr from the training nodes too.</p>
<p>Inspecting these terminal logs is important, as it may convey crucial information about the training, for example:</p>
<ul class="simple">
<li><p>warnings, alerts and errors about the training process,</p></li>
<li><p>debugging information,</p></li>
<li><p>model training statistics, model architecture or summary.</p></li>
</ul>
<p>Aim makes it is easier to analyze the terminal logs in one place by streaming them to Aim UI near-real-time.</p>
<p>Terminal logs are captured by default. In order to disable it, set the <code class="docutils literal notranslate"><span class="pre">capture_terminal_logs</span></code> argument to <code class="docutils literal notranslate"><span class="pre">False</span></code>, when initializing the <code class="docutils literal notranslate"><span class="pre">Run</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">aim_run</span> <span class="o">=</span> <span class="n">Run</span><span class="p">(</span><span class="n">capture_terminal_logs</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>Check out how to view captured logs on Aim UI <a class="reference external" href="../ui/pages/run_management.html#id13">here</a>.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="manage_runs.html" class="btn btn-neutral float-left" title="Manage runs" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="query_runs.html" class="btn btn-neutral float-right" title="Query runs and objects" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019-2022, Gev Sogomonian, Gor Arakelyan et al...</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>